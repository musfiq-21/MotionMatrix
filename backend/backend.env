# ============================================================================
# MotionMatrix Backend - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control - it contains sensitive credentials
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
# Used in: app/core/config.py -> Settings.app_name, Settings.environment
# Purpose: Identify application and environment for logging and monitoring
# ============================================================================
APP_NAME=MotionMatrix
APP_VERSION=1.0.0
ENVIRONMENT=development
# Options: development, staging, production
# - development: Enables debug mode, verbose logging, local SMTP
# - production: Disables debug, uses production SMTP, stricter security

# Server host and port (used by uvicorn)
HOST="0.0.0.0"
PORT=8000
DB_POOL_TIMEOUT=30
# Python timezone (used for datetime operations)
# Used in: app/services/attendance_service.py, app/services/overtime_service.py
# Purpose: Ensure consistent timezone across all time-based operations
TIMEZONE=UTC
# Recommended: Keep as UTC, convert to local timezone in frontend
# Examples: UTC, Asia/Dhaka, America/New_York


# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
# Used in: app/core/config.py -> Settings.database_url
#          app/core/database.py -> create_engine()
# Purpose: Connect to PostgreSQL database for data persistence
# ============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=123456789
# The app will construct: postgresql://DB_USER:DB_PASSWORD@DB_HOST:DB_PORT/DB_NAME

# Database connection pool settings
# Used in: app/core/database.py -> create_engine(pool_size, max_overflow)
DB_POOL_SIZE=10
# Maximum number of permanent connections
DB_MAX_OVERFLOW=20
# Maximum number of temporary connections beyond pool_size
DB_POOL_TIMEOUT=30
# Seconds to wait before giving up on getting a connection
DB_POOL_RECYCLE=3600
# Seconds after which connections are recycled (prevents stale connections)


# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# Used in: app/core/security.py -> create_access_token(), decode_access_token()
#          app/api/deps.py -> get_current_user()
# Purpose: Secure authentication using JSON Web Tokens
# ============================================================================
JWT_SECRET_KEY=0abcf1062eacd5194b6f329f7d6f47eaa4a671b4
# CRITICAL: Generate a strong random secret for production
# Generate using: openssl rand -hex 32
# This key signs all JWT tokens - if compromised, all tokens are compromised

JWT_ALGORITHM=HS256
# Algorithm for JWT encoding/decoding
# Options: HS256 (symmetric), RS256 (asymmetric with public/private keys)
# HS256 is sufficient for most use cases

JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
# Access token lifetime in minutes
# Used in: app/services/auth_service.py -> login()
# Shorter = more secure but users login more frequently
# Recommended: 15-60 minutes for web apps, 5-10 for mobile

JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
# Refresh token lifetime in days (future use)
# Used in: Future implementation of refresh token flow
# Allows users to get new access tokens without re-entering credentials


# ============================================================================
# PASSWORD SECURITY
# ============================================================================
# Used in: app/core/security.py -> hash_password(), validate_password_strength()
#          app/services/user_service.py -> create_user()
# Purpose: Password hashing and validation requirements
# ============================================================================
PASSWORD_MIN_LENGTH=8
# Minimum password length requirement
PASSWORD_REQUIRE_UPPERCASE=true
# Require at least one uppercase letter
PASSWORD_REQUIRE_LOWERCASE=true
# Require at least one lowercase letter
PASSWORD_REQUIRE_DIGIT=true
# Require at least one number
PASSWORD_REQUIRE_SPECIAL=false
# Require at least one special character (!@#$%^&*)

BCRYPT_ROUNDS=12
# Cost factor for bcrypt hashing (higher = slower but more secure)
# Used in: app/core/security.py -> hash_password()
# Range: 10-14 (12 is a good balance between security and performance)
# Each increment doubles the hashing time


# ============================================================================
# EMAIL CONFIGURATION (SMTP)
# ============================================================================
# Used in: app/services/email_service.py -> EmailService class
#          app/services/user_service.py -> create_user() sends welcome email
#          app/services/auth_service.py -> password reset notifications
# Purpose: Send emails for user registration, password resets, notifications
# ============================================================================
SMTP_HOST=smtp.gmail.com
# SMTP server hostname
# Examples:
# - Gmail: smtp.gmail.com
# - Outlook: smtp-mail.outlook.com
# - SendGrid: smtp.sendgrid.net
# - Mailgun: smtp.mailgun.org
# - Local (dev): localhost

SMTP_PORT=587
# SMTP server port
# Common ports:
# - 587: TLS/STARTTLS (recommended)
# - 465: SSL
# - 25: Unencrypted (not recommended)

SMTP_USERNAME=your-email@gmail.com
# SMTP authentication username (usually your email address)
# For Gmail: your Gmail address
# For SendGrid: 'apikey' (literal string)

SMTP_PASSWORD=your-app-specific-password
# SMTP authentication password
# For Gmail: Use App Password (https://myaccount.google.com/apppasswords)
# For SendGrid: Your API key
# CRITICAL: Never use your actual email password for security reasons

SMTP_USE_TLS=true
# Enable TLS encryption (recommended for port 587)
# Set to false if using SSL (port 465)

SMTP_FROM_EMAIL=noreply@motionmatrix.com
# Sender email address shown in sent emails
# Used in: app/services/email_service.py -> send_*_email()
# Can be different from SMTP_USERNAME

SMTP_FROM_NAME=MotionMatrix System
# Sender name shown in sent emails
# Example: Users see "MotionMatrix System <noreply@motionmatrix.com>"


# ============================================================================
# CORS (Cross-Origin Resource Sharing)
# ============================================================================
# Used in: app/main.py -> CORSMiddleware configuration
# Purpose: Allow frontend applications to make requests to the API
# ============================================================================
CORS_ORIGINS=["http://localhost:3000", "http://localhost:5173", "http://127.0.0.1:3000"]
# Comma-separated list of allowed origins (no spaces)
# Examples:
# - React dev server: http://localhost:3000
# - Vite dev server: http://localhost:5173
# - Production: https://motionmatrix.com,https://app.motionmatrix.com
# Use * for allow all (NOT RECOMMENDED for production)

CORS_ALLOW_CREDENTIALS=true
# Allow cookies and authentication headers
# Required for JWT tokens in Authorization header

CORS_ALLOW_METHODS=["GET","POST","PUT","DELETE","PATCH","OPTIONS"]

# HTTP methods allowed for CORS requests

CORS_ALLOW_HEADERS=["*"]

# Headers allowed in CORS requests
# * allows all headers (simplifies development)
# Production: Authorization,Content-Type,Accept


# ============================================================================
# ADMIN USER (Initial Setup)
# ============================================================================
# Used in: app/seed.py -> create_admin_user()
#          app/main.py -> startup event creates admin if not exists
# Purpose: Create default system administrator on first run
# ============================================================================
ADMIN_EMAIL=motionmatrixadmin@gmail.com
# Default admin email for first login
# IMPORTANT: Change this after first login or in production

ADMIN_PASSWORD=Admin@123456
# Default admin password
# CRITICAL: Change immediately after first login
# This is only used on initial database setup


# ============================================================================
# FACTORY OPERATION SETTINGS
# ============================================================================
# Used in: app/services/attendance_service.py, app/services/overtime_service.py
#          app/services/activity_service.py -> idleness detection
# Purpose: Configure factory operation parameters
# ============================================================================

# Shift Configuration
# Used in: app/services/attendance_service.py -> calculate_work_hours()
#          app/services/overtime_service.py -> calculate_overtime()
SHIFT_START_TIME=08:00
# Standard shift start time (24-hour format HH:MM)
SHIFT_END_TIME=17:00
# Standard shift end time (24-hour format HH:MM)
# Any work after this is considered overtime

SHIFT_LUNCH_START=13:00
# Lunch break start time
SHIFT_LUNCH_END=14:00
# Lunch break end time
# Used in: app/services/activity_service.py -> skip idleness detection during lunch

# Overtime Configuration
# Used in: app/services/overtime_service.py -> calculate_overtime_pay()
#          app/models/worker.py -> overtime calculations
OVERTIME_RATE_MULTIPLIER=1.5
# Overtime hourly wage multiplier (1.5 = 150% of regular rate)
# Example: If regular rate is $10/hr, overtime is $15/hr
# Standard in many countries: 1.5x or 2.0x

OVERTIME_MAX_HOURS_PER_DAY=4
# Maximum overtime hours allowed per day
# Used in: app/api/v1/endpoints/workers.py -> validate overtime extension

# Idleness Detection
# Used in: app/services/activity_service.py -> detect_idleness()
#          app/models/idleness_event.py -> threshold comparison
IDLENESS_THRESHOLD_MINUTES=2
# Minutes of inactivity before triggering idleness alert
# Lower value = more sensitive detection, more alerts
# Higher value = less sensitive, might miss actual idleness
# Typical range: 1-5 minutes

IDLENESS_CHECK_INTERVAL_SECONDS=30
# How often to check for idleness (used by dummy activity generator)
# Used in: app/services/activity_service.py -> background task


# ============================================================================
# PAGINATION & API LIMITS
# ============================================================================
# Used in: app/core/config.py -> Settings.default_page_size
#          app/api/v1/endpoints/*.py -> list endpoints
# Purpose: Control API response sizes and prevent abuse
# ============================================================================
DEFAULT_PAGE_SIZE=50
# Default number of items per page when not specified
MAX_PAGE_SIZE=100
# Maximum allowed page size (prevents excessive data transfer)


# ============================================================================
# FILE STORAGE
# ============================================================================
# Used in: app/services/report_service.py -> save reports
#          app/core/config.py -> Settings.reports_dir
# Purpose: Store generated reports (PDF, CSV, Excel)
# ============================================================================
STORAGE_REPORTS_DIR=./storage/reports
# Directory for storing generated reports
# Relative to project root
# Ensure this directory exists and has write permissions

STORAGE_LOGS_DIR=./storage/logs
# Directory for application logs
# Used in: Future logging implementation


# ============================================================================
# RATE LIMITING (Future Implementation)
# ============================================================================
# Used in: Future middleware implementation
# Purpose: Prevent API abuse
# ============================================================================
RATE_LIMIT_ENABLED=false
# Enable/disable rate limiting
RATE_LIMIT_PER_MINUTE=60
# Maximum requests per minute per IP/user


# ============================================================================
# LOGGING
# ============================================================================
# Used in: app/core/config.py -> Settings.log_level
#          Future logging middleware
# Purpose: Control verbosity of application logs
# ============================================================================
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# - DEBUG: Detailed information for debugging (development only)
# - INFO: General informational messages (recommended for production)
# - WARNING: Warning messages
# - ERROR: Error messages
# - CRITICAL: Critical errors that may cause system failure

LOG_FORMAT=json
# Options: json, text
# - json: Structured logging for log aggregation tools (production)
# - text: Human-readable format (development)


# ============================================================================
# SECURITY HEADERS (Future Implementation)
# ============================================================================
# Used in: Future security middleware
# Purpose: Additional security headers for HTTP responses
# ============================================================================
SECURE_HEADERS_ENABLED=true
# Enable security headers (HSTS, X-Frame-Options, etc.)


# ============================================================================
# DEVELOPMENT/DEBUGGING
# ============================================================================
# Used in: app/main.py -> debug mode, app/core/config.py
# Purpose: Development-specific settings
# ============================================================================
DEBUG=true
# Enable debug mode (detailed error messages, auto-reload)
# CRITICAL: Set to false in production

RELOAD=true
# Enable auto-reload on code changes (uvicorn --reload)
# Only for development, disable in production


# ============================================================================
# EXTERNAL SERVICES (Future Integration)
# ============================================================================
# Placeholder for future ML model service integration
ML_SERVICE_URL=http://localhost:5000
# URL for hand activity detection ML service

# Placeholder for future notification service (push notifications)
PUSH_NOTIFICATION_KEY=your-firebase-or-pusher-key


# ============================================================================
# DATABASE MIGRATION
# ============================================================================
# Used in: alembic/env.py -> get database URL
# Purpose: Alembic migrations use this to connect to database
# ============================================================================
# Alembic will construct the URL from DB_* variables above
# No separate configuration needed


# ============================================================================
# TESTING
# ============================================================================
# Used in: tests/conftest.py -> test database configuration
# Purpose: Separate database for running tests
# ============================================================================
TEST_DB_NAME=motionmatrix_test_db
# Name of the test database (created automatically by pytest)
# Tests use in-memory SQLite by default, this is for integration tests


# ============================================================================
# EXAMPLE PRODUCTION VALUES (DO NOT USE AS-IS)
# ============================================================================
# For production deployment, change these values:
#
# ENVIRONMENT=production
# DEBUG=false
# RELOAD=false
#
# JWT_SECRET_KEY=<generated using: openssl rand -hex 32>
# JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
#
# DB_HOST=your-production-db.amazonaws.com
# DB_PASSWORD=<strong-database-password>
#
# SMTP_HOST=smtp.sendgrid.net
# SMTP_USERNAME=apikey
# SMTP_PASSWORD=<sendgrid-api-key>
#
# CORS_ORIGINS=https://motionmatrix.com,https://app.motionmatrix.com
#
# ADMIN_PASSWORD=<change-immediately-after-first-login>
#
# LOG_LEVEL=WARNING
# LOG_FORMAT=json
#
# SECURE_HEADERS_ENABLED=true
# ============================================================================